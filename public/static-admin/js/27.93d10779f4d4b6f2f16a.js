(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"7CQ7":function(e,t,r){"use strict";r.r(t);var a=r("Qv8M"),o=r("cORY");for(var s in o)"default"!==s&&function(e){r.d(t,e,(function(){return o[e]}))}(s);var n=r("KHd+"),i=Object(n.a)(o.default,a.a,a.b,!1,null,null,null);t.default=i.exports},Qv8M:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cont-class-box"},[r("Card",{staticStyle:{"border-bottom":"none"},attrs:{header:"设置权限"}}),e._v(" "),r("div",{staticClass:"cont-class-table"},[r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.groupsList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return r("el-checkbox",{attrs:{id:t.row.id,indeterminate:e.isIndeterminate},on:{change:function(r){return e.handleCheckAllChange(t)}},model:{value:t.row.checkAll,callback:function(r){e.$set(t.row,"checkAll",r)},expression:"scope.row.checkAll"}})}}])}),e._v(" "),r("el-table-column",{attrs:{label:"用户角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"浏览分类"},scopedSlots:e._u([{key:"default",fn:function(t){return r("el-checkbox",{model:{value:t.row.viewThreads,callback:function(r){e.$set(t.row,"viewThreads",r)},expression:"scope.row.viewThreads"}})}}])}),e._v(" "),r("el-table-column",{attrs:{label:"发表内容"},scopedSlots:e._u([{key:"default",fn:function(t){return r("el-checkbox",{attrs:{disabled:!t.row.viewThreads},model:{value:t.row.createThread,callback:function(r){e.$set(t.row,"createThread",r)},expression:"scope.row.createThread"}})}}])}),e._v(" "),r("el-table-column",{attrs:{label:"发表评论"},scopedSlots:e._u([{key:"default",fn:function(t){return r("el-checkbox",{attrs:{disabled:!t.row.viewThreads},model:{value:t.row.replyThread,callback:function(r){e.$set(t.row,"replyThread",r)},expression:"scope.row.replyThread"}})}}])})],1),e._v(" "),r("Card",{staticClass:"footer-btn"},[r("el-button",{attrs:{type:"primary",loading:e.subLoading,size:"medium"},on:{click:e.submitClick}},[e._v("提交")])],1)],1)],1)},o=[]},cORY:function(e,t,r){"use strict";r.r(t);var a=r("zzzB"),o=r.n(a);for(var s in a)"default"!==s&&function(e){r.d(t,e,(function(){return a[e]}))}(s);t.default=o.a},qAI3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r("4gYi")),o=s(r("kAKY"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{groupsList:[],browseCategories:!0,content:!0,comment:!0,categoriesListLength:"",createCategoriesStatus:!1,deleteStatus:!0,multipleSelection:[],visible:!1,delLoading:!1,subLoading:!1}},created:function(){this.getGroups(),this.query=this.$route.query},methods:{getGroups:function(){var e=this;this.appFetch({url:"groups",method:"get",data:{include:["permission"]}}).then((function(t){if(t.errors)e.$message.error(t.errors[0].code);else{var r=e.query.id;e.groupsList=[],t.readdata.forEach((function(t,a){var o=[];t.permission.map((function(e){o.push(e._data.permission)}));var s=-1!==o.indexOf("category"+r+".viewThreads"),n=-1!==o.indexOf("category"+r+".createThread"),i=-1!==o.indexOf("category"+r+".replyThread"),c=s&&n&&i,l=!c;e.groupsList.push({id:t._data.id,name:t._data.name,viewThreads:s,createThread:n,replyThread:i,checkAll:c,isIndeterminate:l})}))}})).catch((function(e){}))},handleCheckAllChange:function(e){var t=e.row.checkAll;e.row.viewThreads=t,e.row.createThread=t,e.row.replyThread=t},submitClick:function(){var e=[],t=[],r=[],a=this.query.id,o="";this.groupsList.map((function(a){a.viewThreads&&e.push(a.id),a.createThread&&t.push(a.id),a.replyThread&&r.push(a.id)})),this.appFetch({url:"setPermission",method:"post",data:{permission:"category"+a+".viewThreads",groupIds:e}}).then((function(e){e.errors&&(o=e.errors[0].code)})),this.appFetch({url:"setPermission",method:"post",data:{permission:"category"+a+".createThread",groupIds:t}}).then((function(e){e.errors&&(o=e.errors[0].code)})),this.appFetch({url:"setPermission",method:"post",data:{permission:"category"+a+".replyThread",groupIds:r}}).then((function(e){e.errors&&(o=e.errors[0].code)})),o?this.$message.error(o):this.$message({message:"提交成功！",type:"success"})}},components:{Card:a.default,TableContAdd:o.default}}},zzzB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r("QbLZ"));r("lL+3");var o=s(r("qAI3"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)({name:"cont-class-configure"},o.default)}}]);